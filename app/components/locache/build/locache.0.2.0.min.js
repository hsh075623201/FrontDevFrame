(function(){function b(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c])}var e=new b;this.locache=e;b.prototype.VERSION="0.2.0";var f=b.prototype,g;try{window.localStorage.setItem("___locache___","___locache___"),window.localStorage.getItem("___locache___"),window.localStorage.removeItem("___locache___"),g=!0}catch(i){g=!1}f.supportsLocalStorage=g;var f=b.prototype,h;try{window.sessionStorage.setItem("___locache___","___locache___"),window.sessionStorage.getItem("___locache___"),window.sessionStorage.removeItem("___locache___"),
h=!0}catch(j){h=!1}f.supportsSessionStorage=h;b.prototype.supportsNativeJSON=!!window.JSON;b.prototype.cachePrefix="___locache___";b.prototype.expirePrefix="___locacheExpire___";b.prototype.backends={local:{set:function(a,c){return window.localStorage.setItem(a,c)},get:function(a){return window.localStorage.getItem(a)},remove:function(a){return window.localStorage.removeItem(a)},length:function(){return window.localStorage.length},key:function(a){return 0>a||a>=this.length()?void 0:window.localStorage.key(a)},
enabled:function(){return e.supportsLocalStorage}},session:{set:function(a,c){return window.sessionStorage.setItem(a,c)},get:function(a){return window.sessionStorage.getItem(a)},remove:function(a){return window.sessionStorage.removeItem(a)},length:function(){return window.sessionStorage.length},key:function(a){return 0>a||a>=this.length()?void 0:window.sessionStorage.key(a)},enabled:function(){return e.supportsSessionStorage}}};b.prototype.storage=e.backends.local;b.prototype.key=function(a){return this.cachePrefix+
a};b.prototype.expirekey=function(a){return this.expirePrefix+a};b.prototype.hasExpired=function(a){a=this.expirekey(a);return(a=parseInt(this.storage.get(a),10))&&a<(new Date).getTime()?!0:!1};b.prototype.set=function(a,c,b){if(this.storage.enabled()&&a){var d=this.expirekey(a),a=this.key(a);b&&this.storage.set(d,(new Date).getTime()+1E3*b);c=JSON.stringify(c);this.storage.set(a,c)}};b.prototype.get=function(a){if(!this.storage.enabled()||!a)return null;if(this.hasExpired(a))return this.remove(this.key(a)),
null;if(a=this.storage.get(this.key(a)))try{return JSON.parse(a)}catch(c){return null}return a};b.prototype.remove=function(a){if(this.storage.enabled()){var c=this.expirekey(a),a=this.key(a);this.storage.remove(c);this.storage.remove(a)}};b.prototype.incr=function(a){if(this.storage.enabled()){var c=parseInt(this.get(a),10);c||(c=0);c++;this.set(a,c);return c}};b.prototype.decr=function(a){if(this.storage.enabled()){var c=parseInt(this.get(a),10);c||(c=0);c--;this.set(a,c);return c}};b.prototype.setMany=
function(a,c){if(this.storage.enabled())for(var b in a)a.hasOwnProperty(b)&&this.set(b,a[b],c)};b.prototype.getMany=function(a){for(var c={},b=0;b<a.length;b++)c[a[b]]=this.storage.enabled()?this.get(a[b]):null;return c};b.prototype.getManyValues=function(a){for(var c=[],b=0;b<a.length;b++)this.storage.enabled()?c.push(this.get(a[b])):c.push(null);return c};b.prototype.removeMany=function(a){if(this.storage.enabled())for(var c=0;c<a.length;c++)this.remove(a[c])};b.prototype.flush=function(){if(this.storage.enabled())for(var a=
this.storage.length(),c=this.cachePrefix,b=0;b<a;b++){var d=this.storage.key(b);d&&0===d.indexOf(c)&&this.storage.remove(d)}};b.prototype.length=function(){if(!this.storage.enabled())return 0;for(var a=0,b=this.storage.length(),e=this.cachePrefix,d=0;d<b;d++)0===this.storage.key(d).indexOf(e)&&a++;return a};b.prototype.cleanup=function(){if(this.storage.enabled())for(var a=this.storage.length(),b=this.cachePrefix,e=0;e<a;e++){var d=this.storage.key(e);d&&0===d.indexOf(b)&&(d=d.substring(b.length,
d.length),this.hasExpired(d)&&this.remove(d))}};b.prototype.createCache=function(a){return new b(a)};e.session=new b({storage:e.backends.session})}).call(this);
