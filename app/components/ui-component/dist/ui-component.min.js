/**
 * ui-component
 * @version v0.2.21 - 2015-02-03
 * @link https://github.corp.ebay.com/opsins/ui-component
 * @author Martin Liu (hualiu@ebay.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t,n){"use strict";!function(){var e=angular.module("pasvaz.bindonce",[]);e.directive("bindonce",function(){var e=function(e){if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"===t||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}else e=!1;return e},t=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(t)&&(t=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var r={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(r,i,o,a){var s=function(t,n,r){var i="show"===n?"":"none",o="hide"===n?"":"none";t.css("display",e(r)?i:o)},c=function(e,t){if(angular.isObject(t)&&!angular.isArray(t)){var n=[];angular.forEach(t,function(e,t){e&&n.push(t)}),t=n}t&&e.addClass(angular.isArray(t)?t.join(" "):t)},u=function(e,t){e.transclude(t,function(t){var n=e.element.parent(),r=e.element&&e.element[e.element.length-1],i=n&&n[0]||r&&r.parentNode,o=r&&r.nextSibling||null;angular.forEach(t,function(e){i.insertBefore(e,o)})})},l={watcherRemover:n,binders:[],group:o.boName,element:i,ran:!1,addBinder:function(e){this.binders.push(e),this.ran&&this.runBinders()},setupWatcher:function(e){var t=this;this.watcherRemover=r.$watch(e,function(e){e!==n&&(t.removeWatcher(),t.checkBindonce(e))},!0)},checkBindonce:function(e){var t=this,n=e.$promise?e.$promise.then:e.then;"function"==typeof n?n(function(){t.runBinders()}):t.runBinders()},removeWatcher:function(){this.watcherRemover!==n&&(this.watcherRemover(),this.watcherRemover=n)},runBinders:function(){for(;this.binders.length>0;){var n=this.binders.shift();if(!this.group||this.group==n.group){var r=n.scope.$eval(n.interpolate?a(n.value):n.value);switch(n.attr){case"boIf":e(r)&&u(n,n.scope.$new());break;case"boSwitch":var i,o=n.controller[0];(i=o.cases["!"+r]||o.cases["?"])&&(n.scope.$eval(n.attrs.change),angular.forEach(i,function(e){u(e,n.scope.$new())}));break;case"boSwitchWhen":var l=n.controller[0];l.cases["!"+n.attrs.boSwitchWhen]=l.cases["!"+n.attrs.boSwitchWhen]||[],l.cases["!"+n.attrs.boSwitchWhen].push({transclude:n.transclude,element:n.element});break;case"boSwitchDefault":var l=n.controller[0];l.cases["?"]=l.cases["?"]||[],l.cases["?"].push({transclude:n.transclude,element:n.element});break;case"hide":case"show":s(n.element,n.attr,r);break;case"class":c(n.element,r);break;case"text":n.element.text(r);break;case"html":n.element.html(r);break;case"style":n.element.css(r);break;case"src":n.element.attr(n.attr,r),t&&n.element.prop("src",r);break;case"attr":angular.forEach(n.attrs,function(e,t){var r,i;t.match(/^boAttr./)&&n.attrs[t]&&(r=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=n.scope.$eval(n.attrs[t]),n.element.attr(r,i))});break;case"href":case"alt":case"title":case"id":case"value":n.element.attr(n.attr,r)}}}this.ran=!0}};return l}],link:function(e,t,r,i){var o=r.bindonce&&e.$eval(r.bindonce);o!==n?i.checkBindonce(o):(i.setupWatcher(r.bindonce),t.bind("$destroy",i.removeWatcher))}};return r}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(t){var r=200;return e.directive(t.directiveName,function(){var e={priority:t.priority||r,transclude:t.transclude||!1,terminal:t.terminal||!1,require:["^bindonce"].concat(t.require||[]),controller:t.controller,compile:function(e,r,i){return function(e,r,o,a){var s=a[0],c=o.boParent;if(c&&s.group!==c){var u=s.element.parent();s=n;for(var l;9!==u[0].nodeType&&u.length;){if((l=u.data("$bindonceController"))&&l.group===c){s=l;break}u=u.parent()}if(!s)throw new Error("No bindonce controller: "+c)}s.addBinder({element:r,attr:t.attribute||t.directiveName,attrs:o,value:o[t.directiveName],interpolate:t.interpolate,group:c,transclude:i,controller:a.slice(1),scope:e})}}};return e})})}(),angular.module("ui-component.base",[]),angular.module("ui-component.deps",["pasvaz.bindonce","ui-component.base"]),angular.module("ui-component",["ui-component.side-menu","ui-component.user"]),angular.module("ui-component.base").factory("RecursionHelper",["$compile",function(e){return{compile:function(t,n){angular.isFunction(n)&&(n={post:n});var r,i=t.contents().remove();return{pre:n&&n.pre?n.pre:null,post:function(t,o){r||(r=e(i)),r(t,function(e){o.append(e)}),n&&n.post&&n.post.apply(null,arguments)}}}}}]),angular.module("ui-component.base").factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function r(e){return"static"===(n(e,"position")||"static")}var i=function(t){for(var n=e[0],i=t.offsetParent||n;i&&i!==n&&r(i);)i=i.offsetParent;return i||n};return{position:function(t){var n=this.offset(t),r={top:0,left:0},o=i(t[0]);o!=e[0]&&(r=this.offset(angular.element(o)),r.top+=o.clientTop-o.scrollTop,r.left+=o.clientLeft-o.scrollLeft);var a=t[0].getBoundingClientRect();return{width:a.width||t.prop("offsetWidth"),height:a.height||t.prop("offsetHeight"),top:n.top-r.top,left:n.left-r.left}},offset:function(n){var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,r){var i,o,a,s,c=n.split("-"),u=c[0],l=c[1]||"center";i=r?this.offset(e):this.position(e),o=t.prop("offsetWidth"),a=t.prop("offsetHeight");var p={center:function(){return i.left+i.width/2-o/2},left:function(){return i.left},right:function(){return i.left+i.width}},f={center:function(){return i.top+i.height/2-a/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(u){case"right":s={top:f[l](),left:p[u]()};break;case"left":s={top:f[l](),left:i.left-o};break;case"bottom":s={top:f[u](),left:p[l]()};break;default:s={top:i.top-a,left:p[l]()}}return s}}}]),angular.module("ui-component.base").factory("HoverDelayService",function(){function e(e){var t,n,r,i,o,a;return a=null,r=!1,i=null,o=function(t){return r?void 0:(clearTimeout(a),a=setTimeout(t,e))},t=function(){return clearTimeout(a)},n=function(e){return clearTimeout(a),clearTimeout(i),r=!0,i=setTimeout(function(){return r=!1},e)},{register:o,clear:t,close:n}}return{newInstance:function(t){return e(t)}}}),angular.module("ui-component.base").directive("uiLoading",function(){return{restrict:"E",scope:{},template:'<div class="ui-loading">\n<i class="fa fa-spinner fa-spin pull-left">\n</i>\n<h4>{{ text }}</h4>\n</div>',link:function(e,t,n){return e.text=n.text,null!=e.text?e.text:e.text="Loading..."}}}),angular.module("ui-component.side-menu",["ui-component.deps"]).directive("uiSideMenu",["$q","$location","$http","$window","$timeout","$rootScope",function(e,n,r,i,o,a){function s(e,n,r,i,o){var a,s;return"undefined"!=typeof Piwik&&null!==Piwik?(s=("https:"===t.location.protocol?"https":"http")+"://opspiwik.corp.ebay.com/piwik/",a=Piwik.getTracker(""+s+"/piwik.php",o),a.setCustomVariable(1,"User",e,"visit"),a.setCustomVariable(2,"App",n,"page"),a.setCustomVariable(3,"PageName",r,"page"),a.setCustomVariable(4,"Prod",i,"page"),a.trackPageView(),a.enableLinkTracking()):void 0}function c(e){e.triggerMinify=function(){e.minified=!e.minified,sessionStorage.setItem(l,e.minified),a.$emit("ui-component.side-menu.trigger-minified",e.minified)},e.setActive=function(n){if(e.active!=n.id){if(e.active=n.id,sessionStorage.setItem(p,e.active),n.notReady)e.mode="comingSoon";else if(n.iframe){e.mode="iframe";var r=t.querySelector("iframe.capacity-dash");r.src=n.iframe.src}else e.mode=null;a.user&&n.piwik&&s(a.user.nt,n.piwik.app,n.piwik.page,n.piwik.prod,n.piwik.siteId),n.showSubMenu=!0}else n.showSubMenu=!n.showSubMenu},e.isActive=function(t){var n=null;if(e.active){var r=e.active.split("_");r.length>1&&(n=r[0]==t.id)}return n||e.active==t.id},e.isExpand=function(t){var n=null;if(e.active){var r=e.active.split("_");r.length>1&&(n=r[0]==t.id)}return n||t.showSubMenu},e.processUrl=function(e){if(e&&!n.$$html5&&0==e.indexOf("/")){var t=e.indexOf(location.pathname);t>-1&&(e=e.replace(location.pathname,"#!"))}return e}}function u(t){var n=e.defer(),i=sessionStorage.getItem(f);if(i)t.list=angular.fromJson(i),n.resolve();else{var o;o=t.sourceUrl?t.sourceUrl:"undefined"!=typeof Config&&Config.uri&&Config.uri.api?Config.uri.api+"uicomponent/getsidemenu":"https://doe.corp.ebay.com/api/uicomponent/getsidemenu",r({method:"GET",url:o}).success(function(e){if(e&&e.length){var r=e[0].list;t.list=angular.fromJson(r),r&&sessionStorage.setItem(f,r),n.resolve()}})}return n.promise}var l="opsins_side_menu_minified",p="opsins_side_menu_active",f="opsins_side_menu_List_Load";return{restrict:"EAC",templateUrl:"side-menu/side-menu.tpl.html",scope:{sourceUrl:"="},transclude:!0,link:function(e){function t(t){if(i)t.id==i&&e.setActive(t);else{var r=n.absUrl().replace(/\?.*/,""),o=location.pathname;(r==t.url||o==t.url)&&e.setActive(t)}}function r(e){angular.forEach(e,function(e){t(e),e.submenu&&e.submenu.length&&r(e.submenu)})}c(e),e.minified="true"==sessionStorage.getItem(l);var i=sessionStorage.getItem(p);u(e).then(function(){r(e.list),e.active||e.setActive(e.list[0])})}}}]),angular.module("ui-component.user",["ui-component.deps"]).directive("uiUser",["$q","$timeout","$http","$position","$templateCache","$compile","$document","RecursionHelper","HoverDelayService",function(e,t,n,r,i,o,a,s,c){function u(e,t){var n,r;return e?r="solr/get?core=ldap&eBayPersonnelID="+e:t&&(r="solr/get?core=ldap&nt="+t),n="https://doe.corp.ebay.com/api/"+r}function l(t){var r=e.defer();return n({method:"GET",url:t}).success(function(e){if(e&&e.response&&e.response.docs&&e.response.docs.length){var t=e.response.docs[0];t.fullName=t.last_name+", "+t.preferred_name,r.resolve(t)}else r.resolve()}),r.promise}function p(t){var n,r=e.defer();return n=t.sourceUrl?t.sourceUrl+t.nt:u(null,t.nt),t.show=!0,t.loaded=!1,l(n).then(function(e){if(e&&e.eBayManagerID){var n=u(e.eBayManagerID);l(n).then(function(n){t.user=e,t.loaded=!0,t.user.manager=n,r.resolve()})}else e&&(t.user=e),t.loaded=!0,r.resolve()}),r.promise}var f={post:function(e,n,s){var u,l=n.find("i"),f="true"==s.appendToBody,d=function(){if(!u){var t=i.get("user/user.popup.tpl.html");u=o(t)(e),f?a.find("body").append(u):n.append(u),f&&(u.bind("mouseenter",function(){u.css("display","block")}),u.bind("mouseleave",function(){u.css("display","none")}))}},m=function(e){var t,n=s.placement||"top";e&&u.css("display","block"),u.addClass(n),t=r.positionElements(l,u,n,f),t.top+="px",t.left+="px",u.css(t)},h=c.newInstance(300);return n.bind("mouseenter",function(){h.register(function(){d(),m(!0),e.loaded||p(e).then(function(){t(m)})})}),n.bind("mouseleave",function(){h.clear(),u.css("display","none")}),e.$on("$destroy",function(){h.close(0),n.unbind("mouseenter"),n.unbind("mouseleave"),u&&(u.unbind("mouseenter"),u.unbind("mouseleave"))})}};return{restrict:"EA",templateUrl:"user/user.tpl.html",scope:{sourceUrl:"=",nt:"="},compile:function(e){return s.compile(e,f)}}}])}(window,document);