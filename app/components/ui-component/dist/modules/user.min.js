/**
 * ui-component
 * @version v0.2.21 - 2015-02-03
 * @link https://github.corp.ebay.com/opsins/ui-component
 * @author Martin Liu (hualiu@ebay.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("ui-component.user",["ui-component.deps"]).directive("uiUser",["$q","$timeout","$http","$position","$templateCache","$compile","$document","RecursionHelper","HoverDelayService",function(e,n,o,r,s,t,u,i,l){function c(e,n){var o,r;return e?r="solr/get?core=ldap&eBayPersonnelID="+e:n&&(r="solr/get?core=ldap&nt="+n),o="https://doe.corp.ebay.com/api/"+r}function a(n){var r=e.defer();return o({method:"GET",url:n}).success(function(e){if(e&&e.response&&e.response.docs&&e.response.docs.length){var n=e.response.docs[0];n.fullName=n.last_name+", "+n.preferred_name,r.resolve(n)}else r.resolve()}),r.promise}function p(n){var o,r=e.defer();return o=n.sourceUrl?n.sourceUrl+n.nt:c(null,n.nt),n.show=!0,n.loaded=!1,a(o).then(function(e){if(e&&e.eBayManagerID){var o=c(e.eBayManagerID);a(o).then(function(o){n.user=e,n.loaded=!0,n.user.manager=o,r.resolve()})}else e&&(n.user=e),n.loaded=!0,r.resolve()}),r.promise}var d={post:function(e,o,i){var c,a=o.find("i"),d="true"==i.appendToBody,m=function(){if(!c){var n=s.get("user/user.popup.tpl.html");c=t(n)(e),d?u.find("body").append(c):o.append(c),d&&(c.bind("mouseenter",function(){c.css("display","block")}),c.bind("mouseleave",function(){c.css("display","none")}))}},f=function(e){var n,o=i.placement||"top";e&&c.css("display","block"),c.addClass(o),n=r.positionElements(a,c,o,d),n.top+="px",n.left+="px",c.css(n)},v=l.newInstance(300);return o.bind("mouseenter",function(){v.register(function(){m(),f(!0),e.loaded||p(e).then(function(){n(f)})})}),o.bind("mouseleave",function(){v.clear(),c.css("display","none")}),e.$on("$destroy",function(){v.close(0),o.unbind("mouseenter"),o.unbind("mouseleave"),c&&(c.unbind("mouseenter"),c.unbind("mouseleave"))})}};return{restrict:"EA",templateUrl:"user/user.tpl.html",scope:{sourceUrl:"=",nt:"="},compile:function(e){return i.compile(e,d)}}}]);
//# sourceMappingURL=user.min.js.map